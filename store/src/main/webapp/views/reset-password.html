<div class="site-page-header text-center">
    {{'page.resetPassword.title' | translate}}
</div>

<div class="row no-marding" ng-show="ctrl.showResetPasswordForm()" ng-controller="ResetPasswordController as ctrl">

    <div class="col-md-3"></div>
    <div class="col-md-6 text-page-area">

        <div class="row" ng-show="ctrl.succeed">
            <div class="col-md-12 text-center">
                {{'reset.password.succeed' | translate}}
            </div>
        </div>

        <form name="resetPasswordForm" ng-submit="resetPasswordForm.$valid && ctrl.reset()" novalidate
              ng-show="!ctrl.succeed">

            <div class="form-group"
                 ng-class="{'has-error': ctrl.hasError|| resetPasswordForm.password.$invalid && (resetPasswordForm.password.$dirty|| resetPasswordForm.$submitted )}">
                <input type="password" class="form-control input-password"
                       name="password"
                       placeholder="{{'password.new.placeholder' | translate}}"
                       ng-model="ctrl.password" ng-required="true"
                       maxlength="50"
                       minlength="8"/>

                <p class="help-block"
                   ng-show="(resetPasswordForm.password.$error.required && (resetPasswordForm.password.$dirty|| resetPasswordForm.$submitted ))">
                    {{'form.field.required' | translate}}</p>

                <p class="help-block"
                   ng-show="resetPasswordForm.password.$invalid && !resetPasswordForm.password.$error.required && (resetPasswordForm.password.$dirty|| resetPasswordForm.$submitted )">
                    {{'subscription.password.invalid' | translate}}</p>
            </div>

            <div class="form-group"
                 ng-class="{'has-error':ctrl.hasError|| ctrl.confirmPasswordDoesNotMatch || resetPasswordForm.confirmpassword.$invalid && (resetPasswordForm.confirmpassword.$dirty|| resetPasswordForm.$submitted )}">
                <input type="password" class="form-control"
                       placeholder="{{'confirmpassword.placeholder' | translate}}"
                       name="confirmpassword"
                       ng-model="ctrl.confirmPassword" ng-required="true"
                       maxlength="50"
                       minlength="8" ng-change="ctrl.confirmPasswordCheck()"/>

                <p class="help-block"
                   ng-show="(resetPasswordForm.confirmpassword.$error.required && (resetPasswordForm.confirmpassword.$dirty|| resetPasswordForm.$submitted ))">
                    {{'form.field.required' | translate}}</p>

                <p class="help-block"
                   ng-show="ctrl.confirmPasswordDoesNotMatch">
                    {{'subscription.confirmpassword.invalid' | translate}}</p>

                <p class="help-block" ng-show="ctrl.hasError">
                    {{ctrl.errorKey | translate}}</p>

                </p>
            </div>

            <div class="row">
                <div class="col-md-12 text-right">
                    <button type="button" class="btn btn-default" ng-click="cancel()">{{'cancel.button' |
                        translate}}
                    </button>
                    <button style="margin-left: 1em" type="submit" class="btn btn-primary">{{'button.submit' |
                        translate}}
                    </button>
                </div>
            </div>
        </form>
        <div id="loaderDiv" ng-show="ctrl.isProcessing">
            <img src="images/loading.gif" class="ajax-loader"/>
        </div>
    </div>
    <div class="col-md-3"></div>
</div>

